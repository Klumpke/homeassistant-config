# Vacuum Automations
- id: vacuum_cleaner_error
  alias: Vacuum Cleaner Error
  trigger:
    - platform: state
      entity_id: sensor.vacuum_cleaner_status_sensor
      to: 'Error'
    - platform: state
      entity_id: sensor.vacuum_cleaner_status_sensor
      to: 'In Error'
    - platform: state
      entity_id: sensor.vacuum_cleaner_status_sensor
      to: 'Charging Error'
  action:
    - service: notify.mobile_app_iklumpke
      data:
        title: 'Roborock S55'
        message: >-
          {% if is_state('sensor.vacuum_cleaner_error_sensor', 'No Error')  %}
            {{states.sensor.vacuum_cleaner_status_sensor.state}}
          {% else %}
            {{states.sensor.vacuum_cleaner_error_sensor.state}}
          {% endif %}
- id: vacuum_cleaner_error_solved
  alias: Vacuum Cleaner Error Solved
  trigger:
    - platform: state
      entity_id: sensor.vacuum_cleaner_error_sensor
      to: 'No Error'
  action:
    - service: notify.mobile_app_iklumpke
      data:
        title: 'Roborock S55'
        message: Error Resolved
- id: vacuum_cleaner_started
  alias: Vacuum Cleaner Started
  trigger:
    - platform: state
      entity_id: vacuum.xiaomi_vacuum_cleaner
      to: 'cleaning'
    - platform: state
      entity_id: vacuum.xiaomi_vacuum_cleaner
      to: 'returning'
    - platform: state
      entity_id: vacuum.xiaomi_vacuum_cleaner
      to: 'docked'
    - platform: state
      entity_id: vacuum.xiaomi_vacuum_cleaner
      to: 'paused'
    - platform: state
      entity_id: vacuum.xiaomi_vacuum_cleaner
      to: 'idle'
  action:
    - service: notify.mobile_app_iklumpke
      data:
        title: 'Roborock S55'
        message: >-
          {{states.sensor.vacuum_cleaner_status_sensor.state}}

- id: vacuum_fan_speed_balanced_when_docked
  alias: Vacuum Fan Speed Balanced When Docked
  trigger:
    - platform: state
      entity_id: vacuum.xiaomi_vacuum_cleaner
      to: 'docked'
  action:
   - service: input_select.select_option
     data:
       option: Balanced
       entity_id: input_select.xiaomi_vacuum

- id: vacuum_fan_speed_quiet
  alias: Vacuum Fan Speed Quiet
  trigger:
    - platform: state
      entity_id: input_select.xiaomi_vacuum
      to: 'Quiet'
  action:
   - service: vacuum.set_fan_speed
     data:
       entity_id: vacuum.xiaomi_vacuum_cleaner
       fan_speed: 101

- id: vacuum_fan_speed_balanced
  alias: Vacuum Fan Speed Balanced
  trigger:
    - platform: state
      entity_id: input_select.xiaomi_vacuum
      to: 'Balanced'
  action:
   - service: vacuum.set_fan_speed
     data:
       entity_id: vacuum.xiaomi_vacuum_cleaner
       fan_speed: 102

- id: vacuum_fan_speed_turbo
  alias: Vacuum Fan Speed Turbo
  trigger:
    - platform: state
      entity_id: input_select.xiaomi_vacuum
      to: 'Turbo'
  action:
   - service: vacuum.set_fan_speed
     data:
       entity_id: vacuum.xiaomi_vacuum_cleaner
       fan_speed: 103

- id: vacuum_fan_speed_max
  alias: Vacuum Fan Speed Max
  trigger:
    - platform: state
      entity_id: input_select.xiaomi_vacuum
      to: 'Max'
  action:
   - service: vacuum.set_fan_speed
     data:
       entity_id: vacuum.xiaomi_vacuum_cleaner
       fan_speed: 104

- id: vacuum_fan_speed_mop
  alias: Vacuum Fan Speed Mop
  trigger:
    - platform: state
      entity_id: input_select.xiaomi_vacuum
      to: 'Mop'
  action:
   - service: vacuum.set_fan_speed
     data:
       entity_id: vacuum.xiaomi_vacuum_cleaner
       fan_speed: 105
